Here is a **clear, production-quality architecture diagram** for your requirement:

---

# ğŸ§© **Architecture Diagram â€” Internal HTML Trigger â†’ Python Script â†’ GitHub Commit**

```
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚        Internal User (Browser)          â”‚
                     â”‚  - Loads HTML page                      â”‚
                     â”‚  - Clicks "Run Script" button           â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚  (HTTPS - internal)
                                     â”‚
                           Internal Network / VPN / VPC
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         HTML Frontend (Internal)       â”‚
                    â”‚  Option A: Private S3 Website           â”‚
                    â”‚  Option B: Confluence Page (Iframe/JS)  â”‚
                    â”‚  Option C: Hosted on EC2 (Nginx)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚ JavaScript Fetch/POST
                                     â”‚ calls API
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Application Load Balancer (ALB)     â”‚
                    â”‚  - Internal only (no public IP)          â”‚
                    â”‚  - Routes /run to backend                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     EC2 Instance (Private)                      â”‚
         â”‚-----------------------------------------------------------------â”‚
         â”‚  Runs:                                                          â”‚
         â”‚   - Flask or FastAPI backend (receives POST from HTML)         â”‚
         â”‚   - Your Python script (script.py)                              â”‚
         â”‚   - Git CLI                                                     â”‚
         â”‚                                                                 â”‚
         â”‚  Workflow:                                                      â”‚
         â”‚    1. Backend receives request from HTML                        â”‚
         â”‚    2. Loads GitHub Token / SSH Key from Secrets Manager         â”‚
         â”‚    3. Clones GitHub Repo                                        â”‚
         â”‚    4. Script generates files/code                               â”‚
         â”‚    5. Git commit + push back to GitHub                          â”‚
         â”‚                                                                 â”‚
         â”‚  Security:                                                      â”‚
         â”‚    - No public internet access                                  â”‚
         â”‚    - Only internal users can reach the endpoint                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ IAM Role (read-only)
                         â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚         AWS Secrets Manager / SSM Parameter Store       â”‚
          â”‚  - Stores GitHub App Token OR SSH Private Key           â”‚
          â”‚  - EC2 retrieves secure credential at runtime           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â–¼ SSH / Token Auth
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                   GitHub Repository                     â”‚
          â”‚      - Codebase to clone                                â”‚
          â”‚      - Branch to commit to                              â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸ” **Explanation of Each Component**

### **1. Internal User**

* Sees a simple HTML page with a button.
* Clicking button triggers Python script through API call.

---

### **2. HTML Frontend**

Hosted in any internal-only location:

* Private S3 â†’ best option
* Confluence â†’ works if you embed HTML/JS
* EC2 Nginx â†’ simplest and flexible

Contains JS like:

```js
fetch('/run', {method: 'POST'})
```

---

### **3. Internal ALB**

* Internal-facing only
* Routes `/run` â†’ EC2
* Prevents direct access to EC2

---

### **4. EC2 Backend (Core Logic)**

Runs:

* Python web server (Flask/FastAPI)
* Your GitHub automation script

Handles:

* Fetch secret token
* Clone repository
* Generate files
* Git add â†’ commit â†’ push

---

### **5. Secrets Manager / SSM**

Stores:

* GitHub Personal Access Token (PAT) **or**
* GitHub App private key **or**
* SSH private key

Backend retrieves it at runtime:

```python
token = ssm.get_parameter(
    Name="/github/token",
    WithDecryption=True
)['Parameter']['Value']
```

---

### **6. GitHub**

Python script interacts with GitHub:

* Clone repo
* Modify files
* Commit + push

---

# ğŸ¯ Summary

This architecture gives you:

* âœ” Internal-only access
* âœ” Secure GitHub token handling
* âœ” Full Python environment
* âœ” Easy extension (logging, audit trail)
* âœ” Ability to add authentication (e.g., SSO)
* âœ” No need for Lambda packaging complexity

---

If you want, I can generate:

âœ… AWS Diagram in Draw.io format
âœ… Terraform/IaC for EC2 + ALB + S3 + IAM
âœ… Flask backend code
âœ… HTML frontend code
âœ… GitHub commit script code

Just tell me **â€œgenerate full implementationâ€**.
